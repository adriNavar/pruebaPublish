@model GeoSit.Client.Web.Models.ValuacionModel
@{
    ViewBag.Title = "Valores Básicos de la Tierra por Módulo";
    ViewBag.Description = "";
    ViewBag.MensajeEntrada = "";

}


@section styles
{
    <link href="../Content/valuacion.css" rel="stylesheet" />
    <link href="../Content/jquery.jscrollpane.css" rel="stylesheet" />
    <link href="../Content/dataTables.bootstrap.css" rel="stylesheet" />
    <link href="../Content/formValidation.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/select2-bootstrap.css">
}

@*Modal Contenido*@
<div class="modal fade" id="myModal" tabindex="-100" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
    @using (Html.BeginForm("GrabaTierraPorModulo", "Valuacion", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { id = "form", role = "form", novalidate = "" }))
    {
        @Html.AntiForgeryToken()
        ViewBag.MensajeEntrada = Model.Mensaje;
        @Html.Hidden("model.Parcela.Tipo_Parcela", Model.Parcela.Tipo_Parcela)

        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header centrado" style="padding: 10px 0px 40px;">
                    <h4 class="modal-title col-lg-12 col-xs-12 col-sm-12 col-md-12" id="myModalLabel">@ViewBag.Title</h4>
                </div>
                <div class="modal-body   modal-body-scroll">

                    <div class="row " style="height:3em;">
                        @*<div class="col-lg-3 col-xs-3 col-sm-3 col-md-3"> </div>*@
                        <div class="col-lg-3 col-xs-3 col-sm-3 col-md-3 centrado">
                            <button type="button" id="masOpcionesZona" class="btnSinBorde h4" title="Más Opciones" data-placement="bottom" style="border-radius:0px; height:100%; cursor:pointer;">
                                Zona
                            </button>
                        </div>
                        <div class="col-lg-3 col-xs-3 col-sm-3 col-md-3 centrado h4">Comparación</div>
                        <div class="col-lg-3 col-xs-3 col-sm-3 col-md-3 centrado">
                            <button type="button" id="masOpcionesSup" class="btnSinBorde h4" title="Más Opciones" data-placement="bottom" style="border-radius:0px; height:100%; cursor:pointer;">
                                Sup (m<sup>2</sup>)
                            </button>
                        </div>
                        <div class="col-lg-3 col-xs-3 col-sm-3 col-md-3 centrado"><label class="h4">Cant. Módulos</label> </div>
                    </div>

                    <div class="row" style=" padding: 0px 20px;">
                        @{
                        var margensegundo = "";
                        var margen = "";
                        if (Model.TierraPorModulo.Zona.Count() > 0)
                        {
                            margen = "margin-top: 10px;";
                        }
                        }
                        @*<div class="col-lg-3 col-xs-3 col-sm-3 col-md-3 BordeCuadro borde-derecho" style="height:100%;"></div>*@
                        <div class="col-lg-3 col-xs-3 col-sm-3 col-md-3 col-md-3 BordeCuadro borde-superior borde-izquierdo borde-inferior" id="divZona" style="height: 100%; padding: 10px 10px;">
                            @********valor 1********@
                            @*@Html.TextBoxFor(model => model.TierraPorModulo.Zona, new { @id = "Zona_0", @name = "model.TierraPorModulo.Zona", @class = "centrado ", @style = "width:100%;", @value = "", @onClick = "AgregarCampo(0)", @maxlength = "6", @tabindex = "1" })*@

                            @for (int i = 0; i < Model.TierraPorModulo.Zona.Count(); i++)
                            {
                                if (i > 0)
                                {
                                    margensegundo = "margin-top: 10px;";
                                }
                                <input class="centrado form-control " id="Zona_@i" name="model.TierraPorModulo.Zona" style="width:100%; @margensegundo" type="text" value="@Model.TierraPorModulo.Zona[i]" maxlength="6" tabindex="1" onclick="AgregarCampo(@i)">

                            }
                            <input class="centrado form-control" id="Zona_@Model.TierraPorModulo.Zona.Count()" name="model.TierraPorModulo.Zona" style="width:100%; @margen" type="text" value="" maxlength="6" tabindex="1" onclick="AgregarCampo(@Model.TierraPorModulo.Zona.Count())">

                        </div>

                        <div class="col-lg-3 col-xs-3 col-sm-3 col-md-3 BordeCuadro borde-izquierdo borde-superior borde-inferior" id="divComparacion" style="height: 100%; padding: 10px 10px;">

                            @********valor comparacion********@
                            @*@Html.HiddenFor(model => model.TierraPorModulo.ValorComparacion, new { @id = "valorComparacion" })*@
                            @*@Html.HiddenFor(model => model.TierraPorModulo.ValorComparacion, new { @id = "valorComparacion_0" })*@
                            @for (int i = 0; i < Model.TierraPorModulo.ValorComparacion.Count(); i++)
                            {
                                margensegundo = "";
                                if (i > 0)
                                {
                                    margensegundo = "style=\"margin-top: 10px;\"";
                                }
                                <div class="container-fluid sin-padding">

                                    <div class="col-lg-12 col-xs-12 col-sm-12 col-md-12 sin-padding" tabindex="1" @margensegundo>
                                        <select class="form-control sin-padding divOpciones" id="Comparacion_@i" name="model.TierraPorModulo.ValorComparacion">
                                            <option value="1">Menor a</option>
                                            <option value="2">Mayor a</option>
                                            <option value="3">Menor o igual a</option>
                                            <option value="4">Mayor o igual a</option>
                                            <option value="5">Igual a</option>
                                            <option value="6">Entre</option>
                                        </select>
                                    </div>
                                </div>
                            }
                            <div class="container-fluid sin-padding">

                                <div class="col-lg-12 col-xs-12 col-sm-12 col-md-12 sin-padding" tabindex="1">
                                    <select class="form-control sin-padding divOpciones" id="Comparacion_@Model.TierraPorModulo.ValorComparacion.Count()" name="model.TierraPorModulo.ValorComparacion">
                                        <option value="1">Menor a</option>
                                        <option value="2" selected>Mayor a</option>
                                        <option value="3">Menor o igual a</option>
                                        <option value="4">Mayor o igual a</option>
                                        <option value="5">Igual a</option>
                                        <option value="6">Entre</option>
                                    </select>
                                </div>
                            </div>

                        </div>

                        <div class="col-lg-3 col-xs-3 col-sm-3 col-md-3 BordeCuadro borde-izquierdo borde-superior borde-inferior" id="divSuperficie" style="height: 100%; padding: 10px 10px;">



                            @for (int i = 0; i < Model.TierraPorModulo.Superficie.Count(); i++)
                            {
                                margensegundo = "";
                                if (i > 0)
                                {
                                    margensegundo = "margin-top: 10px;";
                                }
                                @********valor 2********@
                                @*@Html.TextBoxFor(model => model.TierraPorModulo.Superficie, new { @id = "Superficie_0", @name = "model.TierraPorModulo.Superficie", @class = "centrado ", @style = "width:100%;", @value = "", @onClick = "AgregarCampo(0)", @maxlength = "6", @tabindex = "1" })*@
                                <input class="centrado form-control" id="Superficie_@i" name="model.TierraPorModulo.Superficie" onclick="AgregarCampo(@i)" style="width:100%; @margensegundo " type="text" value="@Model.TierraPorModulo.Superficie[i]" maxlength="6" tabindex="1">
                                @********valor 2 entre********@
                                <div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 sin-padding divOpciones" id="divSuperficieDesde" style="height: 100%; display:none; ">
                                    @*@Html.TextBoxFor(model => model.TierraPorModulo.SuperficieDesde, new { @id = "SuperficieDesde_0", @name = "model.TierraPorModulo.SuperficieDesde", @class = "centrado ", @style = "width:100%;", @value = "", @onClick = "AgregarCampo(0)", @maxlength = "6", @tabindex = "1" })*@
                                    <input class="centrado divOpciones form-control" id="SuperficieDesde_@i" name="model.TierraPorModulo.SuperficieDesde" onclick="AgregarCampo(@i)" style="margin-bottom:10px; width:100%; @margensegundo " type="text" value="@Model.TierraPorModulo.SuperficieDesde[i]" maxlength="6" tabindex="1">
                                </div>
                                <div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 sin-padding divOpciones" id="divSuperficieHasta" style="height: 100%; display: none; ">
                                    @*@Html.TextBoxFor(model => model.TierraPorModulo.SuperficieHasta, new { @id = "SuperficieHasta_0", @name = "model.TierraPorModulo.SuperficieHasta", @class = "centrado ", @style = "width:100%;", @value = "", @maxlength = "6", @tabindex = "1" })*@
                                    <input class="centrado divOpciones form-control" id="SuperficieHasta_@i" name="model.TierraPorModulo.SuperficieHasta" style="margin-bottom:10px; width:100%; @margensegundo" type="text" value="@Model.TierraPorModulo.SuperficieHasta[i]" maxlength="6" tabindex="1">
                                </div>
                            }
                            <input class="centrado form-control" id="Superficie_@Model.TierraPorModulo.Superficie.Count()" name="model.TierraPorModulo.Superficie" onclick="AgregarCampo(@Model.TierraPorModulo.Superficie.Count())" style="width:100%; @margen" type="text" value="" maxlength="6" tabindex="1">
                            <div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 sin-padding divOpciones" id="divSuperficieDesde" style="height: 100%; display:none; ">
                                @*@Html.TextBoxFor(model => model.TierraPorModulo.SuperficieDesde, new { @id = "SuperficieDesde_0", @name = "model.TierraPorModulo.SuperficieDesde", @class = "centrado ", @style = "width:100%;", @value = "", @onClick = "AgregarCampo(0)", @maxlength = "6", @tabindex = "1" })*@
                                <input class="centrado divOpciones form-control" id="SuperficieDesde_@Model.TierraPorModulo.SuperficieDesde.Count()" name="model.TierraPorModulo.SuperficieDesde" onclick="AgregarCampo(@Model.TierraPorModulo.SuperficieDesde.Count())" style="width:100%;" type="text" value="" maxlength="6" tabindex="1">
                            </div>
                            <div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 sin-padding divOpciones" id="divSuperficieHasta" style="height: 100%; display: none; ">
                                @*@Html.TextBoxFor(model => model.TierraPorModulo.SuperficieHasta, new { @id = "SuperficieHasta_0", @name = "model.TierraPorModulo.SuperficieHasta", @class = "centrado ", @style = "width:100%;", @value = "", @maxlength = "6", @tabindex = "1" })*@
                                <input class="centrado divOpciones form-control" id="SuperficieHasta_@Model.TierraPorModulo.SuperficieHasta.Count()" name="model.TierraPorModulo.SuperficieHasta" style="width:100%; @margen" type="text" value="" maxlength="6" tabindex="1">
                            </div>
                        </div>

                        <div class="col-lg-3 col-xs-3 col-sm-3 col-md-3 BordeCuadro borde-izquierdo borde-superior borde-inferior borde-derecho" id="divModulos" style="height: 100%; padding: 10px 10px;">
                            @********valor 3********@
                            @*@Html.TextBoxFor(model => model.TierraPorModulo.CantidadModulos, new { @id = "CantidadModulos_0", @name = "model.TierraPorModulo.CantidadModulos", @class = "centrado ", @style = "width:100%;", @value = "", @maxlength = "6", @tabindex = "1" })*@
                            @for (int i = 0; i < Model.TierraPorModulo.CantidadModulos.Count(); i++)
                            {
                                margensegundo = "";
                                if (i > 0)
                                {
                                    margensegundo = "margin-top: 10px;";
                                }
                                <input class="centrado form-control" id="CantidadModulos_@i" name="model.TierraPorModulo.CantidadModulos" style="width:100%; @margensegundo" type="text" value="@Model.TierraPorModulo.CantidadModulos[i]" maxlength="6" tabindex="1">
                            }
                            <input class="centrado form-control" id="CantidadModulos_@Model.TierraPorModulo.CantidadModulos.Count()" name="model.TierraPorModulo.CantidadModulos" style="width:100%; @margen" type="text" value="" maxlength="6" tabindex="1">
                        </div>

                    </div>

                </div>

                @*BOTONES*@
                <div class="modal-footer" id="Panel_Botones">

                    <img title="Confirmar" id="guardarModulo" src="../Content/images/Valuacion/icons/blue/32/save.png" style="cursor: pointer; margin-right:10px;">

                    <img id="btnCancelarModulo" title="Cerrar" src="../Content/images/Valuacion/icons/blue/32/cancelar.png" style="cursor:pointer;">
                </div>
            </div>
        </div>
    }
</div>

<!-- Modal Advertencia-->
<div class="modal fade" id="ModalAdvertencia" tabindex="-2" role="dialog" aria-labelledby="TituloAdvertencia" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <input type="hidden" id="TipoAdvertencia" value="" />
                <h4 class="modal-title col-lg-11 col-xs-11 col-sm-11 col-md-11" id="TituloAdvertencia" style="color:#000000;">Titulo</h4>
                <br />
            </div>
            <div class="modal-body">
                <div id="MensajeAlerta" class="alert alert-warning alert-dismissible" role="alert">
                    <strong>Atención!</strong><br />
                    <p id="DescripcionAdvertencia">Está a punto de DESACTIVAR al usuario Perez, Juan <br />Está seguro de continuar?</p>
                </div>
            </div>
            <div class="modal-footer" style="background-color:#ffffff;" id="Panel_Botones">
                <img id="btnAdvertenciaOK" data-dismiss="modal" class="" title="Aceptar" src="../Content/images/Seguridad/icons/blue/32/checkbox.png" style="cursor:pointer;">&ensp;&ensp;
                <img id="btnCancelarAdvertencia" data-dismiss="modal" title="Cancelar" src="../Content/images/Seguridad/icons/blue/32/cancelar.png" style="cursor:pointer;">
            </div>
        </div>
    </div>
</div>

<!-- Modal Información-->
<div class="modal fade" id="ModalInfo" tabindex="-3" role="dialog" aria-labelledby="TituloInfo" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <input type="hidden" id="TipoInformacion" value="" />
                <h4 class="modal-title col-lg-11 col-xs-11 col-sm-11 col-md-11" id="TituloInfo" style="color:#000000;">Titulo</h4>
                <br />
            </div>
            <div class="modal-body">
                <div id="MensajeInfo" class="alert alert-success alert-dismissible" role="alert">
                    <strong>Atención!</strong><br />
                    <p id="DescripcionInfo">Descripcion de la informacion</p>
                </div>
            </div>
            <div class="modal-footer" style="background-color:#ffffff;" id="Panel_Botones">
                <img id="btnCancelarInfo" data-dismiss="modal" title="Cancelar" src="../Content/images/Seguridad/icons/blue/32/checkbox.png" style="cursor:pointer;">
            </div>
        </div>
    </div>
</div>

@section scripts
{
    <script src="../Scripts/jquery.dataTables.js"></script>
    <script src="../Scripts/formValidation.min.js"></script>
    <script src="../Scripts/bootstrapValidation.min.js"></script>
    <script src="../Scripts/select2.js"></script>

    <script src="~/Scripts/jquery.inputmask.js" type="text/javascript"></script>
    <script src="~/Scripts/jquery.inputmask.regex.extensions.js" type="text/javascript"></script>
    <script src="~/Scripts/jquery.inputmask.numeric.extensions.js" type="text/javascript"></script>

    <script>

        function AgregarCampo(Index) {

            var indexTab = Index + 1;

            $("#Zona_" + Index).prop('onclick', null).off('click');
            $("#Superficie_" + Index).prop('onclick', null).off('click');
            $("#SuperficieDesde_" + Index + "").prop('onclick', null).off('click');

            Index++;
            indexTab++;

            if ($("#divZona").hasClass('panel-desactivado')) {

                if ($("#divZona").children().prop('disabled') == true) {

                    var campoInput1 = '<input class="centrado  form-control" id="Zona_' + Index + '" name="model.TierraPorModulo.Zona"  style="width:100%; margin-top: 10px;" type="text" value="" maxlength="6" disabled="true" tabindex = "' + indexTab + '">'
                    var campoInput2 = '<div class="container-fluid sin-padding" style="margin-top: 10px;" tabindex = "' + indexTab + '">' +
                    '<div class="col-lg-12 col-xs-12 col-sm-12 col-md-12 sin-padding ">' +
                    '<select class="form-control sin-padding divOpciones" id="Comparacion_' + Index + '" name="model.TierraPorModulo.ValorComparacion">' +
                    '<option value="1">Menor a</option>' +
                    '<option value="2">Mayor a</option>' +
                    '<option value="3">Menor o igual a</option>' +
                    '<option value="4">Mayor o igual a</option>' +
                    '<option value="5">Igual a</option>' +
                    '<option value="6">Entre</option>' +
                    '</select>' +
                    '</div>' +
                    '</div>'


                    var campoInput3 = '<input class="centrado form-control" id="Superficie_' + Index + '" name="model.TierraPorModulo.Superficie" onclick="AgregarCampo(' + Index + ')" style="width:100%; margin-top: 10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '" >' +
                    '<div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 sin-padding " id="divSuperficieDesde' + Index + '" style="height: 100%; display:none; ">' +
                    '<input class="centrado divOpciones form-control" id="SuperficieDesde_' + Index + '" name="model.TierraPorModulo.SuperficieDesde" onclick="AgregarCampo(' + Index + ')" style="width:100%; margin-top: 10px; margin-bottom:10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '" >' +
                    '</div>' +
                    '<div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 sin-padding " id="divSuperficieHasta' + Index + '" style="height: 100%; display: none; ">' +
                    '<input class="centrado divOpciones form-control" id="SuperficieHasta_' + Index + '" name="model.TierraPorModulo.SuperficieHasta" style="width:100%; margin-top: 10px; margin-bottom:10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '" >' +
                    '</div>'

                    var campoInput4 = '<input class="centrado form-control" id="CantidadModulos_' + Index + '" name="model.TierraPorModulo.CantidadModulos" style="width:100%; margin-top: 10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '" onkeypress="javascript:VerificaAgregarCampo(event,this)">'

                    $("#divZona").append(campoInput1);
                    $("#divComparacion").append(campoInput2);
                    $("#divSuperficie").append(campoInput3);
                    $("#divModulos").append(campoInput4);


                } else {

                    var campoInput1 = '<input class="centrado form-control " id="Zona_' + Index + '" name="model.TierraPorModulo.Zona"  style="width:100%; margin-top: 10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '">'
                    var campoInput2 = '<div class="container-fluid sin-padding" style="margin-top: 10px;" tabindex = "' + indexTab + '" name="model.TierraPorModulo.ValorComparacion">' +
                    '<div class="col-lg-12 col-xs-12 col-sm-12 col-md-12 sin-padding ">' +
                    '<select class="form-control sin-padding divOpciones" id="Comparacion_' + Index + '">' +
                    '<option value="1">Menor a</option>' +
                    '<option value="2">Mayor a</option>' +
                    '<option value="3">Menor o igual a</option>' +
                    '<option value="4">Mayor o igual a</option>' +
                    '<option value="5">Igual a</option>' +
                    '<option value="6">Entre</option>' +
                    '</select>' +
                    '</div>' +
                    '</div>'


                    var campoInput3 = '<input class="centrado form-control" id="Superficie_' + Index + '" name="model.TierraPorModulo.Superficie" onclick="AgregarCampo(' + Index + ')" style="width:100%; margin-top: 10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '">' +
                    '<div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 sin-padding " id="divSuperficieDesde' + Index + '" style="height: 100%; display:none; ">' +
                    '<input class="centrado divOpciones form-control" id="SuperficieDesde_' + Index + '" name="model.TierraPorModulo.SuperficieDesde" onclick="AgregarCampo(' + Index + ')" style="width:100%; margin-top: 10px;margin-bottom:10px; " type="text" value="" maxlength="6" tabindex = "' + indexTab + '" >' +
                    '</div>' +
                    '<div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 sin-padding " id="divSuperficieHasta' + Index + '" style="height: 100%; display: none; ">' +
                    '<input class="centrado divOpciones form-control" id="SuperficieHasta_' + Index + '" name="model.TierraPorModulo.SuperficieHasta" style="width:100%; margin-top: 10px; margin-bottom:10px; " type="text" value="" maxlength="6" tabindex = "' + indexTab + '" >' +
                    '</div>'

                    var campoInput4 = '<input class="centrado form-control" id="CantidadModulos_' + Index + '" name="model.TierraPorModulo.CantidadModulos" style="width:100%; margin-top: 10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '" onkeypress="javascript:VerificaAgregarCampo(event,this)">'

                    $("#divZona").append(campoInput1);
                    $("#divComparacion").append(campoInput2);
                    $("#divSuperficie").append(campoInput3);
                    $("#divModulos").append(campoInput4);

                }

            } else {

                if ($(".divOpciones").prop('disabled') == true) {

                    var campoInput1 = '<input class="centrado  form-control" id="Zona_' + Index + '" name="model.TierraPorModulo.Zona" onclick="AgregarCampo(' + Index + ')" style="width:100%; margin-top: 10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '" >'
                    var campoInput2 = '<div class="container-fluid sin-padding" style="margin-top: 10px;" tabindex = "' + indexTab + '" name="model.TierraPorModulo.ValorComparacion">' +
                    '<div class="col-lg-12 col-xs-12 col-sm-12 col-md-12 sin-padding ">' +
                    '<select class="form-control sin-padding divOpciones" id="Comparacion_' + Index + '" disabled="true">' +
                    '<option value="1">Menor a</option>' +
                    '<option value="2">Mayor a</option>' +
                    '<option value="3">Menor o igual a</option>' +
                    '<option value="4">Mayor o igual a</option>' +
                    '<option value="5">Igual a</option>' +
                    '<option value="6">Entre</option>' +
                    '</select>' +
                    '</div>' +
                    '</div>'
                    var campoInput3 = '<input class="centrado form-control" id="Superficie_' + Index + '" name="model.TierraPorModulo.Superficie" style="width:100%; margin-top: 10px;" type="text" value="" maxlength="6" disabled="true" tabindex = "' + indexTab + '">' +
                    '<div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 sin-padding " id="divSuperficieDesde' + Index + '" style="height: 100%; display:none; ">' +
                    '<input class="centrado divOpciones form-control" id="SuperficieDesde_' + Index + '" name="model.TierraPorModulo.SuperficieDesde" onclick="AgregarCampo(' + Index + ')" style="width:100%; margin-top: 10px; margin-bottom:10px; " type="text" value="" maxlength="6" tabindex = "' + indexTab + '" >' +
                    '</div>' +
                    '<div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 sin-padding " id="divSuperficieHasta' + Index + '" style="height: 100%; display: none; ">' +
                    '<input class="centrado divOpciones form-control" id="SuperficieHasta_' + Index + '" name="model.TierraPorModulo.SuperficieHasta" style="width:100%; margin-top: 10px; margin-bottom:10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '" >' +
                    '</div>'

                    var campoInput4 = '<input class="centrado form-control" id="CantidadModulos_' + Index + '" name="model.TierraPorModulo.CantidadModulos" style="width:100%; margin-top: 10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '" onkeypress="javascript:VerificaAgregarCampo(event,this)">'

                    $("#divZona").append(campoInput1);
                    $("#divComparacion").append(campoInput2);
                    $("#divSuperficie").append(campoInput3);
                    $("#divModulos").append(campoInput4);

                } else {

                    var campoInput1 = '<input class="centrado form-control " id="Zona_' + Index + '" name="model.TierraPorModulo.Zona" onclick="AgregarCampo(' + Index + ')" style="width:100%; margin-top: 10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '">'
                    var campoInput2 = '<div class="container-fluid sin-padding" style="margin-top: 10px;" tabindex = "' + indexTab + '">' +
                    '<div class="col-lg-12 col-xs-12 col-sm-12 col-md-12 sin-padding ">' +
                    '<select class="form-control sin-padding divOpciones" id="Comparacion_' + Index + '" name="model.TierraPorModulo.ValorComparacion">' +
                    '<option value="1">Menor a</option>' +
                    '<option value="2">Mayor a</option>' +
                    '<option value="3">Menor o igual a</option>' +
                    '<option value="4">Mayor o igual a</option>' +
                    '<option value="5">Igual a</option>' +
                    '<option value="6">Entre</option>' +
                    '</select>' +
                    '</div>' +
                    '</div>'

                    var campoInput3 = '<input class="centrado form-control" id="Superficie_' + Index + '" name="model.TierraPorModulo.Superficie" style="width:100%; margin-top: 10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '">' +
                    '<div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 sin-padding " id="divSuperficieDesde' + Index + '" style="height: 100%; display:none; ">' +
                    '<input class="centrado divOpciones form-control" id="SuperficieDesde_' + Index + '" name="model.TierraPorModulo.SuperficieDesde" onclick="AgregarCampo(' + Index + ')" style="margin-bottom:10px; width:100%; margin-top: 10px; " type="text" value="" maxlength="6" tabindex = "' + indexTab + '" >' +
                    '</div>' +
                    '<div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 sin-padding " id="divSuperficieHasta' + Index + '" style="height: 100%; display: none; ">' +
                    '<input class="centrado divOpciones form-control" id="SuperficieHasta_' + Index + '" name="model.TierraPorModulo.SuperficieHasta" style="width:100%; margin-top: 10px;margin-bottom:10px; " type="text" value="" maxlength="6" tabindex = "' + indexTab + '" >' +
                    '</div>'


                    var campoInput4 = '<input class="centrado form-control" id="CantidadModulos_' + Index + '" name="model.TierraPorModulo.CantidadModulos" style="width:100%; margin-top: 10px;" type="text" value="" maxlength="6" tabindex = "' + indexTab + '" onkeypress="javascript:VerificaAgregarCampo(event,this)">'

                    $("#divZona").append(campoInput1);
                    $("#divComparacion").append(campoInput2);
                    $("#divSuperficie").append(campoInput3);
                    $("#divModulos").append(campoInput4);

                }
            }

            $("#Comparacion_" + Index + "").change(function () {

                if ($("#Comparacion_" + Index + "").val() == 6) {

                    $("#Superficie_" + Index + "").css('display', 'none');
                    $("#divSuperficieDesde" + Index + "").css('display', 'inline');
                    $("#divSuperficieHasta" + Index + "").css('display', 'inline');

                } else {

                    $("#Superficie_" + Index + "").css('display', 'inline');
                    $("#divSuperficieDesde" + Index + "").css('display', 'none');
                    $("#divSuperficieHasta" + Index + "").css('display', 'none');

                }
            });

            $("#Zona_" + Index + "").inputmask('Regex', { regex: "([0-9]|[A-Z]|[a-z]){6}" });
            $("#SuperficieDesde_" + Index + "").inputmask('decimal', { digits: 1, rightAlign: false, radixPoint: '.' });
            $("#SuperficieHasta_" + Index + "").inputmask('decimal', { digits: 1, rightAlign: false, radixPoint: '.' });
            $("#Superficie_" + Index + "").inputmask('decimal', { digits: 1, rightAlign: false, radixPoint: '.' });
            $("#CantidadModulos_" + Index + "").inputmask('decimal', { digits: 2, rightAlign: false, radixPoint: '.' });

        }

        function VerificaAgregarCampo(event, obj) {

            var char = event.which || event.keyCode;
            var Cantidad = $("#divModulos input").length;

            if (char == 9 && $(obj).prop("tabindex") == Cantidad) {

                AgregarCampo($(obj).prop("tabindex") - 1);

                if ($("#divZona").hasClass('panel-desactivado')) {

                    $("#SuperficieDesde_" + (Cantidad - 1)).focus();

                } else {

                    $("#CantidadModulos_" + (Cantidad - 1)).focus(); // no toma el foco en Zona_

                }
            }
        }


        $(window).resize(ajustamodal);
        function ajustamodal() {
            var altura = $(window).height() - 190; //value corresponding to the modal heading + footer
            $(".modal-body-scroll").css({ "height": altura, "overflow-y": "auto" });
        }

        $(document).ready(function () {

            ajustamodal();
            MostrarMensaje()

            $('#myModal').modal('show');
            //$("#myModal").draggable();

            $("#btnCancelarModulo").click(function () {
                $("#form").attr("Action", "@Url.Action("MetadatoTierra", "Valuacion")");
                $("#form").submit();
            });

            $("#guardarModulo").click(function () {

                var cantidad = $("#divModulos input").length;

                if (cantidad > 1) {
                    cantidad = cantidad - 1;
                }

                for (var i = 0; i < cantidad; i++) {

                    if ($("#Comparacion_" + i).val() == 6) {
                        if ((($("#Zona_" + i).val() == "") || !($("#SuperficieDesde_" + i).val() == "" && $("#SuperficieHasta_" + i).val() == "" && $("#CantidadModulos_" + i).val() == "") && !($("#SuperficieDesde_" + i).val() != "" && $("#SuperficieHasta_" + i).val() != "" && $("#CantidadModulos_" + i).val() != ""))) {

                            var msj = "Todos los campos son obligatorios<br>Debe completarlos para poder grabar.";
                            $('#TituloAdvertencia').html("Advertencia - Grabar")
                            $('#DescripcionAdvertencia').html(msj)
                            $('#TipoAdvertencia').val('GrabarError')
                            $('#ModalAdvertencia').modal('show');
                            return false;
                        }


                    } else {
                        if (($("#Zona_" + i).val() == "") || (!($("#Superficie_" + i).val() == "" && $("#CantidadModulos_" + i).val() == "") && !($("#Superficie_" + i).val() != "" && $("#CantidadModulos_" + i).val() != ""))) {

                            var msj = "Todos los campos son obligatorios<br>Debe completarlos para poder grabar.";
                            $('#TituloAdvertencia').html("Advertencia - Grabar")
                            $('#DescripcionAdvertencia').html(msj)
                            $('#TipoAdvertencia').val('GrabarError')
                            $('#ModalAdvertencia').modal('show');
                            return false;
                        }

                    }

                    //if (i > 0) {


                    for (var j = 0 ; j < cantidad; j++) {
                        if (i != j) {
                            //"1" Menor a
                            //"2" Mayor a
                            //"3" Menor o igual a
                            //"4" Mayor o igual a
                            //"5" Igual a
                            //"6" Entre
                            if ($("#Comparacion_" + i).val() == 6) {
                                if (($("#Zona_" + i).val() == $("#Zona_" + j).val()) && ($("#SuperficieDesde_" + i).val() == $("#SuperficieDesde_" + j).val()) && ($("#SuperficieHasta_" + i).val() == $("#SuperficieHasta_" + j).val()) && ($("#CantidadModulos_" + i).val() == $("#CantidadModulos_" + j).val())) {

                                    var msj = "Las filas no pueden contener los mismos valores.<br>Por favor, ingréselos nuevamente.";
                                    $('#TituloAdvertencia').html("Advertencia - Grabar")
                                    $('#DescripcionAdvertencia').html(msj)
                                    $('#TipoAdvertencia').val('GrabarError')
                                    $('#ModalAdvertencia').modal('show');
                                    return false;
                                }
                                if (($("#Zona_" + i).val() == $("#Zona_" + j).val()) && (parseFloat($("#SuperficieDesde_" + i).val()) <= parseFloat($("#SuperficieDesde_" + j).val())) && (parseFloat($("#SuperficieHasta_" + i).val()) >= parseFloat($("#SuperficieHasta_" + j).val()))) {

                                    var msj = "Hay solapamiento de rangos para la misma Zona.<br>Por favor, ingréselos nuevamente.";
                                    $('#TituloAdvertencia').html("Advertencia - Grabar")
                                    $('#DescripcionAdvertencia').html(msj)
                                    $('#TipoAdvertencia').val('GrabarError')
                                    $('#ModalAdvertencia').modal('show');
                                    return false;
                                }

                            } else if ($("#Comparacion_" + i).val() == 1) {
                                if (($("#Zona_" + i).val() == $("#Zona_" + j).val()) && (parseFloat($("#Superficie_" + i).val()) > parseFloat($("#Superficie_" + j).val()))) {

                                    var msj = "Hay solapamiento de valores para la misma Zona.<br>Por favor, ingréselos nuevamente.";
                                    $('#TituloAdvertencia').html("Advertencia - Grabar")
                                    $('#DescripcionAdvertencia').html(msj)
                                    $('#TipoAdvertencia').val('GrabarError')
                                    $('#ModalAdvertencia').modal('show');
                                    return false;
                                }
                            } else if ($("#Comparacion_" + i).val() == 2) {
                                if (($("#Zona_" + i).val() == $("#Zona_" + j).val()) && (parseFloat($("#Superficie_" + i).val()) < parseFloat($("#Superficie_" + j).val()))) {

                                    var msj = "Hay solapamiento de valores para la misma Zona.<br>Por favor, ingréselos nuevamente.";
                                    $('#TituloAdvertencia').html("Advertencia - Grabar")
                                    $('#DescripcionAdvertencia').html(msj)
                                    $('#TipoAdvertencia').val('GrabarError')
                                    $('#ModalAdvertencia').modal('show');
                                    return false;
                                }
                            }
                            else if ($("#Comparacion_" + i).val() == 3) {
                                if (($("#Zona_" + i).val() == $("#Zona_" + j).val()) && (parseFloat($("#Superficie_" + i).val()) >= parseFloat($("#Superficie_" + j).val()))) {

                                    var msj = "Hay solapamiento de valores para la misma Zona.<br>Por favor, ingréselos nuevamente.";
                                    $('#TituloAdvertencia').html("Advertencia - Grabar")
                                    $('#DescripcionAdvertencia').html(msj)
                                    $('#TipoAdvertencia').val('GrabarError')
                                    $('#ModalAdvertencia').modal('show');
                                    return false;
                                }
                            }
                            else if ($("#Comparacion_" + i).val() == 4) {
                                if (($("#Zona_" + i).val() == $("#Zona_" + j).val()) && (parseFloat($("#Superficie_" + i).val()) <= parseFloat($("#Superficie_" + j).val()))) {

                                    var msj = "Hay solapamiento de valores para la misma Zona.<br>Por favor, ingréselos nuevamente.";
                                    $('#TituloAdvertencia').html("Advertencia - Grabar")
                                    $('#DescripcionAdvertencia').html(msj)
                                    $('#TipoAdvertencia').val('GrabarError')
                                    $('#ModalAdvertencia').modal('show');
                                    return false;
                                }
                            }
                            else if ($("#Comparacion_" + i).val() == 5) {
                                if (($("#Zona_" + i).val() == $("#Zona_" + j).val()) && ($("#Superficie_" + i).val() == $("#Superficie_" + j).val())) {

                                    var msj = "Hay solapamiento de valores para la misma Zona.<br>Por favor, ingréselos nuevamente.";
                                    $('#TituloAdvertencia').html("Advertencia - Grabar")
                                    $('#DescripcionAdvertencia').html(msj)
                                    $('#TipoAdvertencia').val('GrabarError')
                                    $('#ModalAdvertencia').modal('show');
                                    return false;
                                }
                            }
                            else {
                                if (($("#Zona_" + i).val() == $("#Zona_" + j).val()) && (parseFloat($("#Superficie_" + i).val()) == parseFloat($("#Superficie_" + j).val()))) {

                                    var msj = "Hay solapamiento de valores para la misma Zona.<br>Por favor, ingréselos nuevamente.";
                                    $('#TituloAdvertencia').html("Advertencia - Grabar")
                                    $('#DescripcionAdvertencia').html(msj)
                                    $('#TipoAdvertencia').val('GrabarError')
                                    $('#ModalAdvertencia').modal('show');
                                    return false;
                                }
                            }
                        }
                    }
                }

                var msj = "Está a punto de GRABAR los valores ingresado<br>¿Está seguro de continuar?";
                $('#TituloAdvertencia').html("Advertencia - Grabar")
                $('#DescripcionAdvertencia').html(msj)
                $('#TipoAdvertencia').val('Grabar')
                $('#ModalAdvertencia').modal('show')

            });

            $("#btnAdvertenciaOK").click(function () {

                if ($('#TipoAdvertencia').val() == 'Grabar') {
                    $("#form").submit();
                }


            });

            @*$("#btnCancelarInfo").click(function () {

                if ($('#TipoInformacion').val() == 'GrabacionOK') {
                    $("#form").attr("Action", "@Url.Action("ABMPadronTemporal", "Valuacion")")
                    $("#form").submit();
                }

            });*@

            $("#btnCerrarAdvertencia").click(function () {
                //$('#myModal').modal('show');
                $('#ModalAdvertencia').modal('hide');
            });


            $("#Zona_0").inputmask('Regex', { regex: "([0-9]|[A-Z]|[a-z]){6}" });
            $("#SuperficieDesde_0").inputmask('decimal', { digits: 1, rightAlign: false, radixPoint: '.' });
            $("#SuperficieHasta_0").inputmask('decimal', { digits: 1, rightAlign: false, radixPoint: '.' });
            $("#Superficie_0").inputmask('decimal', { digits: 1, rightAlign: false, radixPoint: '.' });
            $("#CantidadModulos_0").inputmask('decimal', { digits: 2, rightAlign: false, radixPoint: '.' });

            $('#masOpcionesSup').popover({
                html: true,
                content: '<div class="centrado" >' +
                '<button type="button" id="deshabilitarSup" class="btnConBorde "   style="border-radius:0px; height: 100%; cursor:pointer;">Deshabilitar Superficie' +
                '</button>  ' +
                '<button type="button" id="habilitarSup" class="btnConBorde "   style="border-radius:0px; height: 100%; cursor:pointer;">Habilitar Superficie' +
                '</button>  ' +
                '</div>'
            });

            $('#masOpcionesSup').click(function () {

                $('#masOpcionesZona').attr("disabled", false);
                $(".popover").css('border-color', 'transparent');
                $(".arrow").css('border-bottom-color', '#093C57');

                if ($("#divSuperficie").children().prop('disabled') == true) {
                    $("#deshabilitarSup").css('display', 'none');
                    $("#habilitarSup").css('display', '');
                } else {
                    $("#habilitarSup").css('display', 'none');
                    $("#deshabilitarSup").css('display', '');
                    $('#masOpcionesSup').attr("disabled", false);
                }

                $("#deshabilitarSup").click(function () {

                    $('.popover').hide();
                    $('#masOpcionesZona').attr("disabled", true);
                    $("#divSuperficie").children().prop('disabled', true);
                    $(".divOpciones").prop('disabled', true);
                    $("#divSuperficie").addClass('panel-desactivado');
                    $("#divComparacion").addClass('panel-desactivado');
                    $("#habilitarSup").css('display', 'inline');
                    $("#deshabilitarSup").css('display', 'none');
                    $("#divSuperficie").removeClass('panel-activo');
                    $('#masOpcionesSup').popover('hide');
                    $('#masOpcionesZona').css('cursor', 'default');
                    $("#divSuperficieDesde").children().prop('disabled', true);
                    $("#divSuperficieHasta").children().prop('disabled', true);
                });

                $("#habilitarSup").click(function () {

                    $('#masOpcionesZona').attr("disabled", true);
                    $('#masOpcionesZona').attr("disabled", false);
                    $("#divSuperficie").children().prop('disabled', false);
                    $(".divOpciones").prop('disabled', false);
                    $("#divSuperficie").removeClass('panel-desactivado');
                    $("#divComparacion").removeClass('panel-desactivado');
                    $("#divSuperficie").addClass('panel-activo');
                    $("#divComparacion").addClass('panel-activo');
                    $("#habilitarSup").css('display', 'none');
                    $("#deshabilitarSup").css('display', 'inline');
                    $('#masOpcionesSup').popover('hide');
                    $('#masOpcionesZona').css('cursor', 'pointer');
                    $("#divSuperficieDesde").children().prop('disabled', false);
                    $("#divSuperficieHasta").children().prop('disabled', false);
                });

            });

            $('#masOpcionesZona').popover({
                html: true,
                content: '<div class="centrado" >' +
                '<button type="button" id="deshabilitarZona" class="btnConBorde "   style="border-radius:0px; height: 100%; cursor:pointer;">Deshabilitar Zona' +
                '</button>  ' +
                '<button type="button" id="habilitarZona" class="btnConBorde "   style="border-radius:0px; height: 100%; cursor:pointer;">Habilitar Zona' +
                '</button>  ' +
                '</div>'
            });

            $('#masOpcionesZona').click(function () {

                $('#masOpcionesSup').attr("disabled", false);
                $(".popover").css('border-color', 'transparent');
                $(".arrow").css('border-bottom-color', '#093C57');

                if ($("#divZona").children().prop('disabled') == true) {
                    $("#deshabilitarZona").css('display', 'none');
                    $("#habilitarZona").css('display', '');
                } else {
                    $("#habilitarZona").css('display', 'none');
                    $("#deshabilitarZona").css('display', '');
                    $('#masOpcionesZona').attr("disabled", false);
                }

                $("#deshabilitarZona").click(function () {

                    $('.popover').hide();
                    $('#masOpcionesSup').attr("disabled", true);
                    $("#divZona").children().prop('disabled', true);
                    $("#divZona").addClass('panel-desactivado');
                    $("#habilitarZona").css('display', 'inline');
                    $("#deshabilitarZona").css('display', 'none');
                    $("#divZona").removeClass('panel-activo');
                    $('#masOpcionesZona').popover('hide');
                    $('#masOpcionesSup').css('cursor', 'default');

                });

                $("#habilitarZona").click(function () {

                    $('#masOpcionesSup').attr("disabled", true);
                    $('#masOpcionesSup').attr("disabled", false);
                    $("#divZona").children().prop('disabled', false);
                    $("#divZona").removeClass('panel-desactivado');
                    $("#divZona").addClass('panel-activo');
                    $("#habilitarZona").css('display', 'none');
                    $("#deshabilitarZona").css('display', 'inline');
                    $('#masOpcionesZona').popover('hide');
                    $('#masOpcionesSup').css('cursor', 'pointer');

                });

            });

            $("#Comparacion_0").change(function () {

                if ($("select").val() == 6) {

                    $("#Superficie_0").css('display', 'none');
                    $("#divSuperficieDesde").css('display', 'inline');
                    $("#divSuperficieHasta").css('display', 'inline');

                } else {

                    $("#divSuperficieDesde").css('display', 'none');
                    $("#divSuperficieHasta").css('display', 'none');
                    $("#Superficie_0").css('display', 'inline');

                }
            });

        });

        function MostrarMensaje() {

            var MensajeEntrada = '@ViewBag.MensajeEntrada'
            if (MensajeEntrada != null && MensajeEntrada != '') {
                if (MensajeEntrada == "OK") {
                    $('#TituloInfo').html("Información - Tierra por Módulo")
                    $('#DescripcionInfo').html("Los datos han sido guardados satisfactoriamente.")
                    $('#TipoInformacion').val('GrabacionOK')
                    $("#ModalInfo").modal('show');
                }

            }
        }


    </script>
}